
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Aleksey Nozdryn-Plotnicki</title>
  <meta name="author" content="Aleksey Nozdryn-Plotnicki">

  
  <meta name="description" content="Consultants need to communicate all of the time, and that isn&rsquo;t always making PowerPoint slides, though it can sometimes seem like it. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alekseynp.github.io/posts/5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Aleksey Nozdryn-Plotnicki" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Aleksey Nozdryn-Plotnicki</a></h1>
  
    <h2>blog, portfolio, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="q" value="site:alekseynp.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about/">About</a></li>
  <li><a href="/portfolio/">Portfolio</a></li>
  <li><a href="/topics/">Topics</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/02/communication-in-consulting-circular-visuals-of-hierarchical-information/">Communication in Consulting: Circular Visuals of Hierarchical Information</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-02T16:28:15-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>4:28 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Consultants need to communicate all of the time, and that isn&rsquo;t always making PowerPoint slides, though it can sometimes seem like it. Technical consultants often wrestle with surprisingly abstract concepts in fields unfamiliar to their client or parts of the client&rsquo;s organisation. While a consultant&rsquo;s role is partly to shield their client from that complexity, there will also be times where things must be shared with a wider audience.</p>

<p>One such abstraction that comes up again and again is a hierarchical structure or taxonomy of information. This is where an idea is broken down into categories, sub-categories and so on. These structures are often used in order to:</p>

<ul>
<li><p>Ensure completeness – no item or category is missing</p></li>
<li><p>Break work down into manageable chunks – Work through a project one sub-category at a time</p></li>
<li><p>Organize an otherwise unwieldy collection of ideas – Bring structure to the problem (a skill highly prized in consulting job interviews)</p></li>
</ul>


<p><strong>Case Studies</strong></p>

<p>Here are three applications that I have seen or been involved in&hellip;</p>

<p><strong>1. Data model</strong></p>

<p>Context: Business Intelligence change program
Organisation: Global manufacturer/retailer/distributor
<a href="http://thinkdatavis.com/wp-content/uploads/2013/07/data_model.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/07/data_model-300x300.png" alt="data_model" /></a>
Note: Sample content merely for demonstration.
Read more: <a href="http://thinkdatavis.com/2013/07/04/case-study-visualizing-the-data-model-in-a-business-intelligence-change-program-at-a-global-manufacturerretailerdistributor/">Case study</a></p>

<p><strong>2. Process model</strong></p>

<p>Context: Siebel implementation
Organisation: Public sector organisation
<a href="http://thinkdatavis.com/wp-content/uploads/2013/07/process_model.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/07/process_model-265x300.png" alt="process_model" /></a>
Note: Sample content merely for demonstration.
Read more: <a href="http://thinkdatavis.com/2013/07/06/case-study-visualizing-the-process-model-in-a-siebel-implementation-at-a-public-sector-organisation/">Case study</a></p>

<p><strong>3.  Taxonomy of organisation&rsquo;s activities</strong></p>

<p>Context: Strategy/profitability projects
Organisation: Global organisation
<a href="http://thinkdatavis.com/wp-content/uploads/2013/07/activity_taxonomy.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/07/activity_taxonomy-300x300.png" alt="activity_taxonomy" /></a>
Note: Sample content merely for demonstration.
Read more: <a href="http://thinkdatavis.com/2013/07/08/case-study-visualizing-the-taxonomy-of-an-organisations-activities-in-strategyprofitability-projects-at-a-global-organisation/">Case study</a></p>

<p><strong>Circular layouts</strong></p>

<p>Circular or radial layouts are unpopular in data viz and for good reasons. When data is involved, the space, distance, size, and angles generally undermine the effectiveness of the visualisations. However, when only categorical information is present (i.e. no numbers) there are some significant benefits:</p>

<p>All on one page – It&rsquo;s critical that stuff fit all on a single page – large pages if necessary. Long Excel spreadsheet logs with columns like Category, Sub-Category, Sub-Sub-Category, Item, Description, Status are useful structures for managing complex work, but totally useless for communication. Radial layouts take tree-shaped information that would otherwise be a long and narrow list, and utilizes the horizontal space of the page, to wrap up the tail and bring it all onto a single sheet.</p>

<p>Engaging – In consulting it&rsquo;s important that your communication be engaging. You want as much support from your client&rsquo;s organisation behind your work as possible. You must win this at every opportunity from each individual who has their normal job that already consumes all of their time and energy and probably doesn&rsquo;t find your work as interesting as you do. Circular layouts look good, and this is important. You want someone to see it, say “Hey, what&rsquo;s that?”, and a take a step forward to have a closer look.</p>

<p><strong>Make your own</strong></p>

<p>I have previously published tools to the web for generating visuals of hierarchical data:</p>

<table style="font-size: 10px; border-spacing: 30px;" >
<tbody >
<tr >

<td style="text-align: center; vertical-align: top; border: 1px solid #dddddd; padding: 10px; margin: 2px; border-radius: 6px 6px 6px 6px;" >[![](http://thinkdatavis.com/portfolio/images/info_wheel_4_alpha_icon.png)
Info Wheel
(4-level)](http://thinkdatavis.com/portfolio/create-visualisations/infowheel4/infoWheel.html)
</td>

<td style="text-align: center; vertical-align: top; border: 1px solid #dddddd; padding: 10px; margin: 2px; border-radius: 6px 6px 6px 6px;" >[![](http://thinkdatavis.com/portfolio/images/node_tree_4_alpha_icon.png)
Radial Tree
(4-level)](http://thinkdatavis.com/portfolio/create-visualisations/reingold-Tilford_Tree4/Reingold_Tilford_Tree.html)
</td>
</tr>
</tbody>
</table>


<p>I will publish more on special request.</p>

<p>Sure you could generate these visuals by hand in PowerPoint, and indeed many junior consultants are probably re-doing just that until 11 pm at night every time something changes. As much as they think they are gaining from the appearance of dedication that this creates, there must be a better way.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/04/how-to-make-nice-boxplots-with-r/">How to Make Nice Boxplots With R</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-06-04T23:26:20-04:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>4</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:26 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Anyone who has tried to create a boxplot in Microsoft Excel will know that there must be a better way. Boxplots are a powerful, standard statistical tool. They aren&rsquo;t that popular in the business community, as they are a little on the technical side, and perhaps this is why they are shunned by Microsoft. In any case, analytics professionals require a reproducible approach for generating good, clean boxplots.</p>

<p>My recent infographic, <a href="http://thinkdatavis.com/2013/06/01/infographic-thinking-of-buying-or-selling-a-peugeot-partner-in-chile/">Thinking of buying or selling a Peugeot Partner in Chile?</a>, I featured two boxplots and here is how I made them.</p>

<p>I used <a href="https://www.google.com.pe/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;ved=0CCoQFjAA&amp;url=http%3A%2F%2Fwww.r-project.org%2F&amp;ei=MFupUa-oDJK40gHAmYH4Dw&amp;usg=AFQjCNFq9BSTD_8y4svhPlIv_58OxEpd5A&amp;sig2=_ziAUMJRWN86JBwlo_VjJw&amp;bvm=bv.47244034,d.dmQ">R</a>, an open source statistics, analytics, and charting software. It is used extremely widely and many would consider it the de facto standard.</p>

<p>I scraped the data from chileautos.cl and output a CSV file from the process for loading into R. Afterwards I ran the following R script. See the extensive comments in order to understand what it&rsquo;s doing:</p>

<pre><code>&lt;span style="color: #666666; font-style: italic;"&gt;# Clear all existing variables from memory&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/rm"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rm&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/list"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;list&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/ls"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;ls&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Set working directory for the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/setwd"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;setwd&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"C:&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;Users&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;Aleksey&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;Documents&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;Data Viz&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;projects&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;chileAutos&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;"&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# load the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/utils/read.csv"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;read.csv&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"partners2013-5-29-20-5.csv"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; header=&lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; sep=&lt;span style="color: #0000ff;"&gt;","&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# set the output type and size -- good for standardizing outputs&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/grDevices/svg"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;svg&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;filename=&lt;span style="color: #0000ff;"&gt;"output.svg"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; width=&lt;span style="color: #cc66cc;"&gt;6&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; height=&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Draw the cord boxplot&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/boxplot"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;boxplot&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
  price&lt;span&gt;~&lt;/span&gt;year&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# puts price on the y axis and groups by year on the x axis&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# dataframe to be used&lt;/span&gt;
  xaxt=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# suppress the default x axis&lt;/span&gt;
  yaxt=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# suppress the default y axis&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/graphics/frame"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;frame&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"f"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# suppress the plotting frame&lt;/span&gt;
  &lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Draw our own x-axis&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/axis"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;axis&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
  &lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# puts the axis at the bottom&lt;/span&gt;
  at=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# labels will be placed in the 17 categories&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/base/labels"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;labels&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# labels will be for the years&lt;/span&gt;
  lwd=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# width of the long axis line is zero, makes invisible&lt;/span&gt;
  lwd.ticks=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# width of the etick lines also zero, makes them invisible&lt;/span&gt;
  cex.axis=&lt;span style="color: #cc66cc;"&gt;0.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# offset from the axis of the labels&lt;/span&gt;
  mgp=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# middle zero controls distance of labels from axis&lt;/span&gt;
  &lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Draw our own y-axis&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/axis"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;axis&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
  &lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# puts the axis on the left&lt;/span&gt;
  at=&lt;a href="http://inside-r.org/r-doc/base/seq"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;seq&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;11000000&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/by"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;by&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1000000&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# creates a vector of label locations starting at 0 ever 1 mil to 11 mil&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/base/labels"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;labels&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/formatC"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;formatC&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/seq"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;seq&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;11000000&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/by"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;by&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1000000&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/format"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;format&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"d"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; big.mark=&lt;span style="color: #0000ff;"&gt;','&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# similar labels with formatting&lt;/span&gt;
  las=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# rotate labels to be parallel&lt;/span&gt;
  cex.axis=&lt;span style="color: #cc66cc;"&gt;0.65&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# offset of labels&lt;/span&gt;
  lwd=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# width of the long axis line is zero, makes invisible&lt;/span&gt;
  lwd.ticks=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# tick marks are 1 wide&lt;/span&gt;
  tck=&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.02&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# length of ticks, negative goes out from the plot&lt;/span&gt;
  mgp=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.35&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# 0.35 controls the left-right movemenet of the tick labels&lt;/span&gt;
  &lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Put our title on&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/mtext"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;mtext&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/graphics/text"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;text&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"Price by Year"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;
      side = &lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# Top&lt;/span&gt;
      adj=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# Combined with top implies left alignment&lt;/span&gt;
      &lt;a href="http://inside-r.org/r-doc/stats/line"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;line&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# Controls what margin line, essentially moves the text up and down&lt;/span&gt;
      cex=&lt;span style="color: #cc66cc;"&gt;1.1&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# text size&lt;/span&gt;
      &lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;a href="http://inside-r.org/r-doc/grDevices/dev.off"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;dev.off&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# writes the SVG file to the working directory&lt;/span&gt;
</code></pre>

<p><a href="http://www.inside-r.org/pretty-r">Created by Pretty R at inside-R.org</a></p>

<p>What we get from this script:</p>

<p><a href="http://thinkdatavis.com/wp-content/uploads/2013/06/output.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/06/output-300x200.png" alt="output" /></a></p>

<p>What we would get from the default:</p>

<p><a href="http://thinkdatavis.com/wp-content/uploads/2013/06/output_default.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/06/output_default-300x200.png" alt="output_default" /></a></p>

<p>One aspect of this approach to highlight is the SVG device output. By scripting the size of the SVG output and writing it to disk, we take more control over the process, creating a more scripted and reproducible outcome.</p>

<pre><code>&lt;a href="http://inside-r.org/r-doc/grDevices/svg"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;svg&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;filename=&lt;span style="color: #0000ff;"&gt;"output.svg"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; width=&lt;span style="color: #cc66cc;"&gt;6&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; height=&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/grDevices/dev.off"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;dev.off&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
</code></pre>

<p>If you wanted to create 76 such boxplots, say one for each supplier to your company, all to the same size standard, doing so in Excel would be a nightmare. Even flexing VBA, the dimensioning, positioning, alignment, generation, etc. of Excel charts can be very frustrating. Trust me, I&rsquo;ve been there. With scripting in R, one could wrap a loop around the above and generate any number of charts to the exact same size, dimensions, etc.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/31/infographic-thinking-of-buying-or-selling-a-peugeot-partner-in-chile/">Infographic: Thinking of Buying or Selling a Peugeot Partner in Chile?</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-31T21:57:04-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>9:57 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://thinkdatavis.com/wp-content/uploads/2013/06/partner1.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/06/partner1.png" alt="partner" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/27/data-sins-of-the-ontario-ministry-of-finance-public-sector-salary-disclosure/">Data Sins of the Ontario Ministry of Finance – Public Sector Salary Disclosure</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-27T23:47:59-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:47 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Upfront warning: This article is likely to be only interesting to two types of people, those expecting to work with this data from the Ontario Ministry of Finance, and anyone in a position to demand better.</p>

<p>Apart from their obvious failure to publish the data in clean, machine-readable formats like csv or xls, the Ontario Ministry of Finance is making other important mistakes when making releases for the Public Salary Disclosure.</p>

<p><strong>Addenda</strong></p>

<p>The addenda is inconsistently applied to the master, published, available data. For each year an addenda is published, containing changes to the data from when it was published. There are three types of changes: additions, changes, and deletions. As far as I can tell, deletions are acted upon, and are reflected in the published set (this is so for 2012), but changes and additions are not. This is a big problem, because now no clear audit trail exists for the data, and people using the data from different times will disagree on basic facts like the number of employees disclosed.</p>

<p>The inconsistent application of the addenda is also inconsistent. For instance, in 2009, the deletions have not be enacted upon the published data.</p>

<p>Changes are listed with no reference to the original data, so what type of change is not known. In 2012 there were 328 records changed with one or more changes, 1 change of employer, 1 change of surname, 14 changes of given name, 175 changes of position, 135 changes of salary paid, 11 changes of taxable benefits. More disturbingly, 1 where the changed row matched exactly to the original row. Not a good indicator of good data discipline.</p>

<p>In 2012, two supposed additions were in fact changes, one for position and one for employer name. This simple error will have consequences for anyone working, collaborating, or communicating with the data.</p>

<p><strong>Inconsistent Pagination</strong></p>

<ul>
<li><p>2013 disclosure has 1,000 records per page across 104 pages</p></li>
<li><p>2012 disclosure breaks up organisations (hospitals, colleges, etc.) in irregular chunks across 61 pages</p></li>
<li><p>2011 disclosure keeps most organisations on a single page, with a few broken into only two pages for a total of 15 pages</p></li>
<li><p>2010 similar to 2011 and 14 pages</p></li>
</ul>


<p><strong>Inconsistent HTML Format</strong></p>

<ul>
<li><p>2013 and 2012 tables contain header information in thead and data in tbody</p></li>
<li><p>2011 and before tables do not contain tbody, and simply have header information in the first tr</p></li>
</ul>


<p><strong>Inconsistent Location for those seconded to ministries</strong></p>

<ul>
<li><p>2013 has it&rsquo;s own page</p></li>
<li><p>Before it was a second table on the last page of ministries</p></li>
</ul>


<p><strong>Other</strong></p>

<p>Inexplicably, a single record under schoolboards in 2007 has a taxable benefits of “101..92” rather than “$101.92” like the record immediately following it. Yes that&rsquo;s two decimals and no dollar sign. Inexplicably, a single record under other in 2007 has a salary paid of “$115, 448.78”. Yes, there&rsquo;s a space after the comma. Yes, these may seem like small things, but they betray a deeper malpractice. A properly validated and typed data structure would not allow this abnormalities.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/19/how-to-custom-charts-with-r-openoffice-calc-and-inkscape/">How to: Custom Charts With R, OpenOffice Calc, and Inkscape</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-19T11:46:31-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>11:46 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>In my recent posts analysing the Ontario Public Sector Salary Disclosure, I produced several visuals and I thought I would share how I did it. Custom, high quality, effective, professional, clean, stylish visuals can be difficult to wrestle out of standard analytical software, so here&rsquo;s some guidance on how-to.</p>

<table width="500" ><tr >
<td style="vertical-align:top;" >
[![pathologistsovertime](http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png)](http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png)

</td>
<td style="vertical-align:top;" >
[![top4000_raise_2012](http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png)](http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png)

</td>
<td style="vertical-align:top;" >
[![graphv2](http://54.214.234.254/wp-content/uploads/2013/04/graphv2.png)](http://54.214.234.254/wp-content/uploads/2013/04/graphv2.png)

</td></tr></table>


<p>I used all open source tools:</p>

<ul>
<li><p><a href="http://www.r-project.org/">R</a> – Open source statistical analysis and charting software</p></li>
<li><p><a href="www.openoffice.org">OpenOffice Calc</a> – Open source alternative to Excel</p></li>
<li><p><a href="inkscape.org">Inkscape</a> – Open source alternative to Adobe Illustrator</p></li>
</ul>


<p>The process was:</p>

<ol>
<li><p> Data Gathering and Analysis – a deep topic for another post</p></li>
<li><p> CSV as a bridge between analysis tools and charting tools</p></li>
<li><p> R or Calc to generate base chart</p></li>
<li><p> Inkscape to clean up</p></li>
</ol>


<p><strong>Charts with R and Inkscape</strong></p>

<p><strong>Chart 1: Average Pathologist Salary by List Ranking</strong></p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png" alt="pathologistsovertime" /></a></p>

<ol>
<li><p>Data Gathering and Analysis – was an extensive task undertaken with C# and a topic for another post</p></li>
<li><p>CSV - In order to bridge from the analysis tool to the charting application &reg;, I used a simple flat file. If the analysis were done in R, this would obviously not be necessary.</p></li>
</ol>


<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/csv_image.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/csv_image.png" alt="csv_image" /></a></p>

<ol>
<li><p>R - Load the CSV into R and produce the base chart with the following code. See in-line comments for detail on how it works.</p>

<p> <span style="color: #666666; font-style: italic;"># Clear all existing variables from memory</span>
 <a href="http://inside-r.org/r-doc/base/rm"><span style="color: #003399; font-weight: bold;">rm</span></a><span style="color: #009900;">(</span><a href="http://inside-r.org/r-doc/base/list"><span style="color: #003399; font-weight: bold;">list</span></a>=<a href="http://inside-r.org/r-doc/base/ls"><span style="color: #003399; font-weight: bold;">ls</span></a><span style="color: #009900;">(</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span></p>

<p> <span style="color: #666666; font-style: italic;"># Set working directory for the csv file</span>
 <a href="http://inside-r.org/r-doc/base/setwd"><span style="color: #003399; font-weight: bold;">setwd</span></a><span style="color: #009900;">(</span><span style="color: #0000ff;">&ldquo;C:<span style="color: #000099; font-weight: bold;">\</span>Users<span style="color: #000099; font-weight: bold;">\</span>Aleksey<span style="color: #000099; font-weight: bold;">\</span>Documents<span style="color: #000099; font-weight: bold;">\</span>Data Journalism<span style="color: #000099; font-weight: bold;">\</span>c#<span style="color: #000099; font-weight: bold;">\</span>salaryDisclosure&rdquo;</span><span style="color: #009900;">)</span></p>

<p> <span style="color: #666666; font-style: italic;"># load the csv file</span>
 <a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399; font-weight: bold;">data</span></a> <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/read.csv"><span style="color: #003399; font-weight: bold;">read.csv</span></a><span style="color: #009900;">(</span><span style="color: #0000ff;">&ldquo;rankRaiseAalysis.csv&rdquo;</span><span style="color: #339933;">,</span> header=<span style="color: #000000; font-weight: bold;">TRUE</span><span style="color: #339933;">,</span> sep=<span style="color: #0000ff;">&ldquo;,&rdquo;</span><span style="color: #339933;">,</span> as.is=<span style="color: #000000; font-weight: bold;">TRUE</span><span style="color: #009900;">)</span></p>

<p> <span style="color: #666666; font-style: italic;"># take a subest of the data, only the top some</span>
 lessData <span style="">&lt;-</span> <a href="http://inside-r.org/r-doc/utils/data"><span style="color: #003399; font-weight: bold;">data</span></a><span style="color: #009900;">[</span><span style="color: #cc66cc;">1</span><span style="">:</span><span style="color: #cc66cc;">4000</span><span style="color: #339933;">,</span><span style="color: #009900;">]</span></p>

<p> <span style="color: #666666; font-style: italic;"># x axis is rank</span>
 x <span style="">&lt;-</span> lessData<span style="">$</span>rank</p>

<p> <span style="color: #666666; font-style: italic;"># set up the grid for the graphs</span>
 <span style="color: #666666; font-style: italic;"># mfrom (4,4) defines 4 x 4 grid</span>
 <span style="color: #666666; font-style: italic;"># mar defines margins, bottom, left, top, right</span>
 <span style="color: #666666; font-style: italic;"># mgp moves the axis labels around and is currently redundant</span>
 <a href="http://inside-r.org/r-doc/graphics/par"><span style="color: #003399; font-weight: bold;">par</span></a><span style="color: #009900;">(</span>mfrow = <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">4</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/mAr"><span style="">mar</span></a> = <a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0.1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0.5</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0.5</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> mgp=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span></p>

<p> <span style="color: #000000; font-weight: bold;">for</span> <span style="color: #009900;">(</span>i <span style="color: #000000; font-weight: bold;">in</span> <span style="color: #cc66cc;">1998</span><span style="">:</span><span style="color: #cc66cc;">2013</span><span style="color: #009900;">)</span>
 <span style="color: #009900;">{</span>
   <span style="color: #666666; font-style: italic;"># for whatever reason R doesn&rsquo;t do sensible string concatenation</span>
   <span style="color: #666666; font-style: italic;"># this adds X to i to get the string for fetching the variable from the dataframe</span>
   y <span style="">&lt;-</span> paste0<span style="color: #009900;">(</span><span style="color: #0000ff;">&ldquo;X&rdquo;</span><span style="color: #339933;">,</span>i<span style="color: #009900;">)</span>
   <a href="http://inside-r.org/r-doc/graphics/plot"><span style="color: #003399; font-weight: bold;">plot</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> lessData<span style="color: #009900;">[</span><span style="color: #339933;">,</span>y<span style="color: #009900;">]</span><span style="">*</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># also mutiply by 100 to get % values</span>
        type=<span style="color: #0000ff;">&ldquo;h&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># histogram</span>
        ylim=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">20</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># y-axis limits min 0, max 20</span>
        main=i<span style="">-</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># this is the chart title</span>
        ylab=<span style="color: #0000ff;">&ldquo;&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no y axis lavels </span>
        xlab=<span style="color: #0000ff;">&ldquo;&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no x axis labels</span>
        xaxt=<span style="color: #0000ff;">&ldquo;n&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># suppress x axis</span>
        yaxt=<span style="color: #0000ff;">&ldquo;n&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># suppress y axis</span>
        xaxs=<span style="color: #0000ff;">&ldquo;i&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no margin within the plotting frame to the left or right</span>
        yaxs=<span style="color: #0000ff;">&ldquo;i&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># similarly</span>
        <a href="http://inside-r.org/r-doc/base/col"><span style="color: #003399; font-weight: bold;">col</span></a>=<span style="color: #0000ff;">&ldquo;#550000&rdquo;</span> <span style="color: #666666; font-style: italic;"># plotting colour</span>
        <span style="color: #009900;">)</span>
 <span style="color: #009900;">}</span></p>

<p> <span style="color: #666666; font-style: italic;"># for the next plot, we don&rsquo;t want the 4x4 grid, so set it back to 1x1</span>
 <a href="http://inside-r.org/r-doc/graphics/par"><span style="color: #003399; font-weight: bold;">par</span></a><span style="color: #009900;">(</span>mfrow=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <a href="http://inside-r.org/packages/cran/mAr"><span style="">mar</span></a>=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> mgp=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1.5</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0.5</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span></p>

<p> <a href="http://inside-r.org/r-doc/graphics/plot"><span style="color: #003399; font-weight: bold;">plot</span></a><span style="color: #009900;">(</span>x<span style="color: #339933;">,</span> lessData<span style="">$</span>X2013<span style="">*</span><span style="color: #cc66cc;">100</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># plot only 2013 in this chart, multiply by 100 to get % values</span>
      type=<span style="color: #0000ff;">&ldquo;h&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;">#histogram</span>
      ylim=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">20</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># y-axis goes from 0 to 20</span>
      ylab=<span style="color: #0000ff;">&ldquo;&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no y axis labels</span>
      yaxs=<span style="color: #0000ff;">&ldquo;i&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no margin within the plotting frame to the top or bottom</span>
      yaxt=<span style="color: #0000ff;">&ldquo;n&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># suppress y axis</span>
      xlim=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4000</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># x-axis goes from 0 to 4000</span>
      xlab=<span style="color: #0000ff;">&ldquo;&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no x axis labels</span>
      xaxs=<span style="color: #0000ff;">&ldquo;i&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># no margin within the plotting frame to the left or right</span>
      xaxt=<span style="color: #0000ff;">&ldquo;n&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># suppress the x-axis</span>
      main=<span style="color: #0000ff;">&ldquo;Year 2012 % Salary Growth For Top 4000 on Sunshine List&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;">#title</span>
      <a href="http://inside-r.org/r-doc/base/col"><span style="color: #003399; font-weight: bold;">col</span></a>=<span style="color: #0000ff;">&ldquo;#D45500&rdquo;</span><span style="color: #009900;">)</span></p>

<p> <span style="color: #666666; font-style: italic;"># add our own axis title</span>
 <a href="http://inside-r.org/r-doc/graphics/title"><span style="color: #003399; font-weight: bold;">title</span></a><span style="color: #009900;">(</span>xlab=<span style="color: #0000ff;">&ldquo;Rank&rdquo;</span><span style="color: #339933;">,</span>
       cex.lab = <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># size</span></p>

<p> <span style="color: #666666; font-style: italic;"># add a custom x-axis</span>
 <a href="http://inside-r.org/r-doc/graphics/axis"><span style="color: #003399; font-weight: bold;">axis</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># 1 = at the bottom</span>
      at=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">2000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4000</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># vector of value locations for the ticks</span>
      <a href="http://inside-r.org/r-doc/base/labels"><span style="color: #003399; font-weight: bold;">labels</span></a>=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">1</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">1000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">2000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">3000</span><span style="color: #339933;">,</span><span style="color: #cc66cc;">4000</span><span style="color: #009900;">)</span><span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># vector of labels for those ticks</span></p>

<p> <span style="color: #666666; font-style: italic;"># add a custom y-axis</span>
 <a href="http://inside-r.org/r-doc/graphics/axis"><span style="color: #003399; font-weight: bold;">axis</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">2</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># 2 = y axis</span>
      at=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #cc66cc;">0</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">10</span><span style="color: #339933;">,</span> <span style="color: #cc66cc;">20</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># vector of value ocations for the ticks</span>
      <a href="http://inside-r.org/r-doc/base/labels"><span style="color: #003399; font-weight: bold;">labels</span></a>=<a href="http://inside-r.org/r-doc/base/c"><span style="color: #003399; font-weight: bold;">c</span></a><span style="color: #009900;">(</span><span style="color: #0000ff;">&ldquo;0&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&ldquo;10&rdquo;</span><span style="color: #339933;">,</span> <span style="color: #0000ff;">&ldquo;20&rdquo;</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span> <span style="color: #666666; font-style: italic;"># vector of labels for those ticks</span>
      cex.lab=<span style="color: #cc66cc;">0.5</span><span style="color: #009900;">)</span> <span style="color: #666666; font-style: italic;"># size</span></p></li>
</ol>


<p><a href="http://www.inside-r.org/pretty-r">Created by Pretty R at inside-R.org</a></p>

<p>The following chart is generated by R and can be exported to SVG for loading into Inkscape.</p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/Rplot.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/Rplot.png" alt="Rplot" /></a></p>

<ol>
<li>Inkscape</li>
</ol>


<p>Open the file in Inkscape, ungroup the elements and start cleaning:</p>

<ul>
<li><p>Colourise</p></li>
<li><p>Add legends and labels</p></li>
<li><p>Removal of excess ink for a cleaner look</p>

<ul>
<li><p>No Y or X axis- lines, these can be visually implied by the ticks</p></li>
<li><p>No plotting area border, again visually implied by the other elements</p></li>
</ul>
</li>
<li><p>Better Y and X axis ticks and labels</p></li>
<li><p>Required extensive use of the object align and distribute features</p></li>
</ul>


<p><strong>Chart 2 – Salary Growth at top of “Sunshine List”</strong></p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png" alt="top4000_raise_2012" /></a></p>

<ol>
<li><p>Data Gathering and Analysis – was an extensive task undertaken with C# and a topic for another post</p></li>
<li><p>CSV - In order to bridge from the analysis tool to the charting application &reg;, I used a simple flat file. If the analysis were done in R, this would obviously not be necessary.</p></li>
</ol>


<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/csv_image2.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/csv_image2.png" alt="csv_image2" /></a></p>

<ol>
<li>R</li>
</ol>


<p>Load the CSV into R and produce the base chart with the following code. See in-line comments for detail on how it works.</p>

<pre><code>&lt;span style="color: #666666; font-style: italic;"&gt;# Clear all existing variables from memory&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/rm"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rm&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/list"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;list&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/ls"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;ls&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Set working directory for the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/setwd"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;setwd&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"C:&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;Users&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;Aleksey&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;Documents&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;Data Viz&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;blogging&lt;span style="color: #000099; font-weight: bold;"&gt;\&lt;/span&gt;017 - Pathologists follow-up"&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# load the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt; &lt;span style=""&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/utils/read.csv"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;read.csv&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"newPathologists.csv"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# csv file&lt;/span&gt;
                 header=&lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# varaible names are at the top&lt;/span&gt;
                 sep=&lt;span style="color: #0000ff;"&gt;","&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# it's commas, it's a csv&lt;/span&gt;
                 as.is=&lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# build a plot with the firs tseries of data against year&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/plot"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;plot&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style=""&gt;$&lt;/span&gt;year&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style=""&gt;$&lt;/span&gt;X1.to.25&lt;span style="color: #339933;"&gt;,&lt;/span&gt;
     type=&lt;span style="color: #0000ff;"&gt;"l"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# makes a line plot&lt;/span&gt;
     ylim=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;450000&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# sets the range for the y axis&lt;/span&gt;
     xaxt=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# supresses the x-axis for customisation later&lt;/span&gt;
     lwd=&lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# sets the line width&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# build our own custom x axis &lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/axis"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;axis&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# puts it at the bottom&lt;/span&gt;
     at=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2002&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2007&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2012&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# position for the ticks&lt;/span&gt;
     &lt;a href="http://inside-r.org/r-doc/base/labels"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;labels&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2002&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2007&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2012&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# labels for those ticks&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# use a for loop for the rest of the data, the other 7 series&lt;/span&gt;
&lt;span style="color: #000000; font-weight: bold;"&gt;for&lt;/span&gt; &lt;span style="color: #009900;"&gt;(&lt;/span&gt;i &lt;span style="color: #000000; font-weight: bold;"&gt;in&lt;/span&gt; &lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style=""&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;7&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #009900;"&gt;{&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# below is my ridiculous solution for string manipulation in R&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# in order to turn 1, 2, 3... into the names of my variables&lt;/span&gt;
  y &lt;span style=""&gt;&lt;-&lt;/span&gt; paste0&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"X"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;paste0&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style=""&gt;+&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;25&lt;/span&gt;&lt;span style=""&gt;*&lt;/span&gt;i&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;paste0&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;".to."&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;25&lt;/span&gt;&lt;span style=""&gt;+&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;25&lt;/span&gt;&lt;span style=""&gt;*&lt;/span&gt;i&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

  &lt;span style="color: #666666; font-style: italic;"&gt;# the lines command adds lines to an existing plot&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/graphics/lines"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;lines&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style=""&gt;$&lt;/span&gt;year&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# x is still year&lt;/span&gt;
        &lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;y&lt;span style="color: #009900;"&gt;]&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# having built y as a string i.e. "X25.to.50", you can refernce it this way&lt;/span&gt;
        lwd=&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style=""&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style=""&gt;*&lt;/span&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;i&lt;span style=""&gt;/&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;7&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;# a little function for line width that makes later series thinner&lt;/span&gt;
&lt;span style="color: #009900;"&gt;}&lt;/span&gt;
</code></pre>

<p><a href="http://www.inside-r.org/pretty-r">Created by Pretty R at inside-R.org</a></p>

<p>The following two charts are generated by R and can be exported to SVG for loading into Inkscape.</p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/rankraise-part1.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/rankraise-part1.png" alt="rankraise part1" /></a></p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/rankraise-part2.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/rankraise-part2.png" alt="rankraise part2" /></a></p>

<ol>
<li><p>Inkscape</p></li>
<li><p>Open the file in Inkscape, ungroup the elements and start cleaning:</p></li>
<li><p>Customise colours</p></li>
<li><p>Better titles</p></li>
<li><p>Grey-out borders and labels to reduce chart clutter</p></li>
</ol>


<p><strong>Chart with OpenOffice Calc and Inkscape</strong></p>

<p><strong>Chart 3 – Ontario “Sunshine List” Salary Growth</strong></p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/04/graphv2.png"><img src="http://54.214.234.254/wp-content/uploads/2013/04/graphv2.png" alt="graphv2" /></a></p>

<ol>
<li><p>Data Gathering and Analysis – was an extensive task undertaken with C# and a topic for another post</p></li>
<li><p>CSV</p></li>
</ol>


<p>In order to bridge from the analysis tool to the charting application &reg;, I used a simple flat file. If the analysis were done in R, this would obviously not be necessary.</p>

<ol>
<li>OpenOffice Calc</li>
</ol>


<p>Load the CSV into Calc. Create the three bar charts.</p>

<ol>
<li><p>Inkscape</p></li>
<li><p>Copy and paste from OpenOffice Calc into Inkscape.</p></li>
<li><p>Tear up everything, keeping only the bars.</p></li>
<li><p>Custom labelling, lines, row shading, etc.</p></li>
<li><p>Extensive use of align and distribute features.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/06/pathologists-follow-up-data-from-1996-to-2013-from-ontario-sunshine-list/">Pathologists Follow-up, Data From 1996 to 2013 From Ontario &#8220;Sunshine List&#8221;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-06T16:31:34-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:31 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is a follow-up on my article, <a href="http://thinkdatavis.com/20-25-raise-for-ontarios-pathologists-in-201-shows-sunshine-list/">20-25% raise for Ontario’s pathologists in 2012</a>. Evolving from an explorative analysis of the 2013 Ontario Public Sector Salary Disclosure, the &ldquo;Sunshine List&rdquo;, I identified a surprising change in the packages (salary + benefits) of pathologists on the list.</p>

<p><strong>Further Analysis</strong></p>

<p>Extending the analysis backwards to 1996, the start of the “Sunshine List” we can get a more complete picture of salary changes for Ontario pathologists.</p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/pathologistsovertime.png" alt="pathologistsovertime" /></a></p>

<p>The analysis and the visual shows that:</p>

<ul>
<li><p>Since 1997, pathologist packages have increased on average 5.5% annually</p></li>
<li><p>From 1997 to 2007, packages increased 6.6% annually and exponentially which was clearly unsustainable</p></li>
<li><p>From 2007 to 2012, packages saw little to no growth</p></li>
<li><p>In 2013, there was an unprecedented, single-year growth of 22%</p></li>
</ul>


<p><strong>Contact</strong></p>

<p>I contacted the Ontario Ministry of Health and Long-Term Care. Their media relations passed me on to the Ontario Association of Pathologists, whom I had already contacted and have yet to see a response. A sensible strategy for them would be to ignore enquiries from bloggers regardless of if they had anything to hide.</p>

<p><strong>More</strong></p>

<p>You can read more on this topic in a<a href="http://opinion.financialpost.com/2013/07/08/terence-corcoran-the-sunshine-race-to-the-top/"> piece in the Financial Post</a> which cites these findings.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/06/second-largest-growth-gap-in-2012-for-ontario-sunshine-list/">Second Largest Growth-gap in 2012 for Ontario &#8220;Sunshine List&#8221;</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-06T08:00:38-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:00 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have <a href="http://thinkdatavis.com/7-2-raise-for-1000-best-paid-ontario-public-sector-employees/">previously shown</a> that 2012 was a good year for the highest paid individuals in the Ontario Public Sector Salary Disclosure (&ldquo;Sunshine List&rdquo;). The top 1,000 best paid workers saw salary growth of average 7.2% where everyone else saw 2.2%. It can further be shown that 2012 was one of the biggest years for disproportionate growth at the top. Only 2008 shows a bigger gap between the 1,000 best paid and everyone else:</p>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/top4000_raise_2012.png" alt="top4000_raise_2012" /></a></p>

<p>Furthermore, We can see that:</p>

<ul>
<li><p>A similar shape to 2012 in 2008, 2006, 2004, and 2000. In all of these years, the very top (1000 or so) of the list saw considerably more growth than those near the top (ranks 1000 to 4000 or so).</p></li>
<li><p>2009-2011 were weak growth years, with 2009 and 2011 showing actually lower salary growth at the very top</p></li>
</ul>


<p><strong>More</strong></p>

<p>You can read more on this topic in a<a href="http://opinion.financialpost.com/2013/07/08/terence-corcoran-the-sunshine-race-to-the-top/"> piece in the Financial Post</a> which cites these findings.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/01/bolivia-el-regimen-tributario-simplificado/">Bolivia: El Régimen Tributario Simplificado</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-01T12:01:12-04:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>12:01 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am writing this from Sucre, Bolivia which is under siege with all major roads in and out of the city blockaded. Doing some research I found this article (Spanish language): <a href="http://eju.tv/2013/04/la-semana-se-inicia-con-amenazas-de-paros-y-bloqueos-el-gobierno-no-cede/">http://eju.tv/2013/04/la-semana-se-inicia-con-amenazas-de-paros-y-bloqueos-el-gobierno-no-cede/</a></p>

<p>Naturally I saw the infographic, didn&rsquo;t like it, and as an exercise, spruced it up.</p>

<h2>Improved:</h2>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/bolivian-bars.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/bolivian-bars.png" alt="bolivian bars" /></a></p>

<h2>Original:</h2>

<p><a href="http://54.214.234.254/wp-content/uploads/2013/05/bolivian-bars-original.png"><img src="http://54.214.234.254/wp-content/uploads/2013/05/bolivian-bars-original.png" alt="bolivian bars original" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/22/current-publishing-of-ontario-sunshine-list-not-good-enough/">Current Publishing of Ontario &#8220;Sunshine List&#8221; Not Good Enough</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-22T08:00:26-04:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>8:00 am</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Standing where we are in 2013, the Public Services Salary Disclosure Act of 1996 in Ontario seems ahead of it&rsquo;s time in terms of open government data. 17 consecutive lists published of all public sector employees who earned more than $100,000 in a year. But, what was once a bold step forward in terms of public accountability, is now falling behind in other ways.</p>

<p>By today&rsquo;s standards, publishing an intimidatingly long list of approaching 100,000 names and salaries across 100 or so HTML or PDF pages does not constitute disclosure. Sure, it&rsquo;s great if you want to look up how much your boss makes or to keep an eye on the salaries of TVO presenters, but after that it falters. Making data possible to access, and making it easy to access are different things. If the data were published in print, but not made available online, would that be acceptable? Was it in 1996?</p>

<p>Any data journalist who wants to work with the data, must first scrape it from those hundred pages, which either requires some technical skill and some time, or brute force and quite a lot of time. Even answering simple questions like, “How many names are on the list?” and “What is the average salary?” have to wait for this scraping to be performed.</p>

<p>What about the general public? Even if they&rsquo;ve never heard of scraping a web page, they should still have natural questions like: How many people from each employer is on the list? How much money are CEOs making on average this year? Is that more than last year? How many people on the list are Pathologists?</p>

<p><strong>Easy change</strong></p>

<p>At a minimum, the entire list should be made available for download in a single file in CSV and/or XLS format. This would remove barriers and save time for any data journalist wanting to access the information. This should be trivially easy to do, because by the looks of the URLs, the 2013 (for 2012) disclosure is already stored in a database.</p>

<p><strong>Empower the ecosystem</strong></p>

<p>Not only does this mean that citizens and journalists could better access the data, but it also would enable data visualisation and interaction practitioners to create tools for the entire public to access the information.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/19/20-25-raise-for-ontarios-pathologists-in-201-shows-sunshine-list/">20-25% Raise for Ontario&#8217;s Pathologists in 2012</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-19T12:58:10-04:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:58 pm</span></time>
        
        
      </p>
    
  </header>


  <div class="entry-content"><p>Evidence from the Ontario Public Sector Salary Disclosure, the so-called “Sunshine List”, shows that pathologists in Ontario saw an average salary increase in 2013 of 20-25% over the previous year. This average for the entire list was 2.2%.</p>

<p>Appearing in both the 2013 and 2012 disclosures, 195 pathologists saw their average package (salary + taxable benefits) increase by $57k or 20.6% from $280k to $337k.  The top 200 earning pathologists in 2012 averaged $348k, a 25.4% increase over 2011.</p>

<p><strong>Ontario Public Salary Disclosure</strong></p>

<p>Every year since 1996, the Ontario Ministry of Finance has released a list of all public sector employees who earned more than $100,000 in the previous year.</p>

<p><strong>Why?</strong></p>

<p>So what&rsquo;s happening here? Why are pathologists seeing a 25% raise while the rest of the list shows a very reasonable growth of 2.2%?</p>

<p>At this point all we have are hypotheses. Analysis of the publicly available data has uncovered a surprising feature, and further investigation is required to find the cause. This is exactly the sort of process we should expect from an open government/open data initiative like the Sunshine List.</p>

<p><strong>Detail</strong></p>

<p>The positions in the data mapped to pathologist were:</p>

<ul>
<li><p>Pathologist</p></li>
<li><p>Pathologist / Pathologiste</p></li>
<li><p>Pathologist Laboratory Medical Director and Chief of Medical Staff</p></li>
<li><p>Pathologist/Laboratory Medical Director</p></li>
<li><p>Pathologist/ Anatomopathologiste</p></li>
<li><p>Pathologist – Pathology / Pathologiste</p></li>
<li><p>Associate Director Pathology / Directrice adjointe Pathologie</p></li>
<li><p>Neuropathologist / Professor</p></li>
<li><p>Neuropathologist</p></li>
<li><p>Laboratory Pathologist / Pathologiste du laboratoire</p></li>
<li><p>Laboratory Pathologist/Pathologiste du laboratoire</p></li>
<li><p>Medical Director Clinical Lab Services / Pathologiste</p></li>
<li><p>Pathologist/Pathologiste</p></li>
<li><p>Associate Director Pathology / Directeur adjoint Pathologie</p></li>
<li><p>Associate Pathologist / Pathologiste adjoint</p></li>
<li><p>Associate Pathologist/Pathologiste adjoint</p></li>
<li><p>Senior Associate Pathologist</p></li>
<li><p>Senior Associate Pathologist / Pathologiste associÃ©(e) principal(e)</p></li>
<li><p>Division Head Haematopathology</p></li>
<li><p>Chief Pathology &amp; Laboratory Director</p></li>
<li><p>Associate Pathologist</p></li>
<li><p>Associate Pathologist / Pathologiste associÃ©(e)</p></li>
<li><p>Pathologist and Director Laboratory Medicine</p></li>
<li><p>Pathologist/Director Laboratory Medicine</p></li>
<li><p>Director Pathology / Directeur Pathologie</p></li>
<li><p>Pathologist–in–Chief</p></li>
<li><p>Pathologist-in-Chief</p></li>
<li><p>Associate Head of Pathology</p></li>
<li><p>Associate Head Pathology</p></li>
<li><p>Division Head Pathology</p></li>
<li><p>Pathologist – General / Pathologiste général</p></li>
<li><p>Pathologist - General/Pathologiste gÃ©nÃ©ral</p></li>
<li><p>Anatomical Pathologist / Anatomopathologiste</p></li>
<li><p>Anatomical Pathologist/Anatompoathologiste</p></li>
<li><p>Chief Pathologist</p></li>
<li><p>Administrative Director Pathology and Laboratory Medicine</p></li>
<li><p>Senior Pathologists Assistant</p></li>
<li><p>Speech Pathologist – Voice</p></li>
<li><p>Speech Pathologist Voice</p></li>
<li><p>Administrative Director Pathology &amp; Laboratory Medicine</p></li>
<li><p>Haematopathologist</p></li>
<li><p>Senior Manager Pathology &amp; Laboratory Medicine</p></li>
<li><p>Anatomic Pathologist / Professor</p></li>
<li><p>Pathologist &amp; Discipline Director</p></li>
</ul>


<p><strong>Sources:</strong></p>

<p><a href="http://www.fin.gov.on.ca/en/publications/salarydisclosure/pssd/">http://www.fin.gov.on.ca/en/publications/salarydisclosure/pssd/</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/6">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/posts/4">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Aleksey Nozdryn-Plotnicki -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
