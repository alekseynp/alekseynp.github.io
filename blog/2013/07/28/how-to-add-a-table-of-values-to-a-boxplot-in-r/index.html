
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to Add a Table of Values to a Boxplot in R - Aleksey Nozdryn-Plotnicki</title>
  <meta name="author" content="Aleksey Nozdryn-Plotnicki">

  
  <meta name="description" content="In this post I show how to use R to create a nice boxplot chart with a table showing the boxplot statistics to one side. As I have shown before, R &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alekseynp.github.io/blog/2013/07/28/how-to-add-a-table-of-values-to-a-boxplot-in-r">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Aleksey Nozdryn-Plotnicki" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Fjalla+One" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Aleksey Nozdryn-Plotnicki</a></h1>
  
    <h2>blog, portfolio, etc.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscribe" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewbox="0 0 100 100"><path class="social" d="M 13.310204,73.332654 C 5.967347,73.332654 0,79.322448 0,86.621428 c 0,7.338776 5.967347,13.262246 13.310204,13.262246 7.370408,0 13.328572,-5.92245 13.328572,-13.262246 0,-7.29898 -5.958164,-13.288774 -13.328572,-13.288774 z M 0.01530612,33.978572 V 53.143878 C 12.493878,53.143878 24.229592,58.02347 33.068368,66.865306 41.894898,75.685714 46.767346,87.47449 46.767346,100 h 19.25 C 66.017346,63.592858 36.4,33.979592 0.01530612,33.978572 l 0,0 z M 0.03877552,0 V 19.17449 C 44.54796,19.17551 80.77551,55.437756 80.77551,100 H 100 C 100,44.87653 55.15102,0 0.03877552,0 z"></path></svg></a></li>
  
</ul>
  
  
  
  
  
  
  
    
      <form action="https://www.google.com/search" method="get">
        <fieldset role="search">
          <input type="hidden" name="q" value="site:alekseynp.github.io" />
    
          <input class="search" type="text" name="q" results="0" placeholder="Search"/>
        </fieldset>
      </form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/portfolio">Portfolio</a></li>
  <li><a href="/topics">Topics</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">How to Add a Table of Values to a Boxplot in R</h1>
      
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-28T13:11:41-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>1:11 pm</span></time>
        
        
      </p>
    
  </header>


<div class="entry-content"><p>In this post I show how to use R to create a nice boxplot chart with a table showing the boxplot statistics to one side.</p>

<p>As I have<a href="http://thinkdatavis.com/2013/06/05/how-to-make-nice-boxplots-with-r/"> shown before</a>, R can be used to produce nice-looking boxplots, a standard statistical technique that is not a standard chart available in the ubiquitous Microsoft Excel. Boxplots are a useful visualisation, but often your customer will also want to see a table of the values so that they can both see the trend and, for example, look up exact average values. If you try to create this table using Excel PivotTables, you will quickly be disappointed to see that it is not possible to calculate quartiles in a PivotTable. An Excel master will be able to create a bespoke set of formulas to filter the data and utilize the =Percentile() worksheet function, but there must be a better way&hellip; and there is.</p>

<p>Here is the demo output using R (click for larger):</p>

<p><a href="http://thinkdatavis.com/wp-content/uploads/2013/07/demo.png"><img src="http://thinkdatavis.com/wp-content/uploads/2013/07/demo-300x120.png" alt="demo" /></a></p>

<p>How to create this using R? See further below for my complete script.</p>

<p>Important script elements:</p>

<pre><code>m &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rbind"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rbind&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/layout"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;layout&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;m&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
</code></pre>

<p>Rather than using par(mfrow(1,2)) which would create a 1 rows by 2 columns grid of equal size, we can use layout to create a layout with unequal sizes. Using c(1,1,1,2,2) above, we are able to make the size of the chart a 3:2 ratio to the table. If we wanted, we could use c(1,1,1,2) to create a 3:1 ratio.</p>

<pre><code>&lt;span style="color: #666666; font-style: italic;"&gt;# initialize the arrays&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# Creates a vector of 17 (there are 17 yeras) NAs that we will fill in later&lt;/span&gt;
means &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
mins &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
maxs &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
lowerq &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
upperq &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# Creates a vectory of 1997, 1998, 1999,... 2013&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# These are the years at the bottom of the boxplot&lt;/span&gt;
years &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Perform this loop once for each value of i from 1997 to 2013&lt;/span&gt;
&lt;span style="color: #000000; font-weight: bold;"&gt;for&lt;/span&gt; &lt;span style="color: #009900;"&gt;(&lt;/span&gt;i &lt;span style="color: #000000; font-weight: bold;"&gt;in&lt;/span&gt; &lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #009900;"&gt;{&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# Run the boxplot statistics for this year&lt;/span&gt;
  boxstats &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/grDevices/boxplot.stats"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;boxplot.stats&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
    &lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;"year"&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;&lt;span&gt;==&lt;/span&gt;i&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"price"&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;  &lt;span style="color: #666666; font-style: italic;"&gt;# filters the data for only year that matches i&lt;/span&gt;
    &lt;a href="http://inside-r.org/r-doc/stats/coef"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;coef&lt;/span&gt;&lt;/a&gt; = &lt;span style="color: #cc66cc;"&gt;1.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; do.conf = &lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; do.out = &lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# Next 5 lines store the boxplot statistics into our arrays&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# i-1996 trasforms 1997 to 2013 into 1 to 17, these are the indexes in our array&lt;/span&gt;
  mins&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  lowerq&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  means&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  upperq&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  maxs&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;5&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
&lt;span style="color: #009900;"&gt;}

&lt;/span&gt;
</code></pre>

<p>The code above utilizes the boxplot.stats() function and then pulls the actual values from the output for use later.</p>

<pre><code>&lt;a href="http://inside-r.org/packages/cran/PerformanceAnalytics"&gt;&lt;span&gt;PerformanceAnalytics&lt;/span&gt;&lt;/a&gt;&lt;span&gt;:::&lt;/span&gt;textplot&lt;span style="color: #009900;"&gt;(&lt;/span&gt;myBoxStats &lt;span style="color: #666666; font-style: italic;"&gt;#data&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;halign = &lt;span style="color: #0000ff;"&gt;"left"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#horizontal alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;valign = &lt;span style="color: #0000ff;"&gt;"top"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#vertical alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;row.valign=&lt;span style="color: #0000ff;"&gt;"center"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#row alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/packages/cran/mAr"&gt;&lt;span&gt;mar&lt;/span&gt;&lt;/a&gt; = &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.1&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#margin parameters&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;show.rownames=&lt;span style="color: #000000; font-weight: bold;"&gt;FALSE&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#omit the record identifiers&lt;/span&gt;
&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
</code></pre>

<p>Using the strangely named PerformanceAnalytics package, this command writes out a graphic table using the data.</p>

<p>Download the data <a href="https://docs.google.com/file/d/0B4hPSKdfKZm1OXcwWDVqZzJkYXM/edit?usp=sharing">here </a>if you want to see the script running live on your own computer. Remember to update the setwd at the top of the file to the directory where you saved the data to.</p>

<p>Here is the full script that creates a boxplot graph and includes a table of values to the right:</p>

<pre><code>&lt;span style="color: #666666; font-style: italic;"&gt;# Clear all existing variables from memory&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/rm"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rm&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/list"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;list&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/ls"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;ls&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Set working directory for the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/setwd"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;setwd&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span&gt;&lt;span style="color: #0000ff;"&gt;"C:&lt;/span&gt;&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;&lt;span&gt;&lt;span style="color: #0000ff;"&gt;yourDirectory&lt;/span&gt;&lt;/span&gt;&lt;span style="color: #000099; font-weight: bold;"&gt;\\&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# load the csv file&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/utils/read.csv"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;read.csv&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"dataForBlog.csv"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; header=&lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; sep=&lt;span style="color: #0000ff;"&gt;","&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# some code that cleans up the variables so that boxplot will work later&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt; &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/data.frame"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data.frame&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/sapply"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;sapply&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/function"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;function&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;x&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #009900;"&gt;{&lt;/span&gt; &lt;span style="color: #000000; font-weight: bold;"&gt;if&lt;/span&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/is.factor"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;is.factor&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;x&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #009900;"&gt;{&lt;/span&gt;
  &lt;a href="http://inside-r.org/r-doc/base/as.numeric"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;as.numeric&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/as.character"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;as.character&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;x&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #009900;"&gt;}&lt;/span&gt; &lt;span style="color: #000000; font-weight: bold;"&gt;else&lt;/span&gt; &lt;span style="color: #009900;"&gt;{&lt;/span&gt;
  x
&lt;span style="color: #009900;"&gt;}&lt;/span&gt;
&lt;span style="color: #009900;"&gt;}&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Prepare the "device" that this graph will be prepared for -- more standard results&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# than acquired by exporting from the R GUI&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/grDevices/png"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;png&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;filename = &lt;span style="color: #0000ff;"&gt;"demo.png"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; width = &lt;span style="color: #cc66cc;"&gt;800&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; height = &lt;span style="color: #cc66cc;"&gt;320&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/units"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;units&lt;/span&gt;&lt;/a&gt; = &lt;span style="color: #0000ff;"&gt;"px"&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Create a vector and use it to define the layout&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# Here we will have two panels in a ratio of 3:2&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# c(1,2) or c(1,1,2,2) would create two equal panels&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# c(1,1,2) would create two panels in a ratio of 2:1&lt;/span&gt;
m &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rbind"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rbind&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/layout"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;layout&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;m&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Generate the boxplot. Not the focus of this script, so no comments&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/par"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;par&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/packages/cran/mAr"&gt;&lt;span&gt;mar&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/boxplot"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;boxplot&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;price&lt;span&gt;~&lt;/span&gt;year&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; xaxt=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; yaxt=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/graphics/frame"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;frame&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"f"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/packages/cran/mAr"&gt;&lt;span&gt;mar&lt;/span&gt;&lt;/a&gt; = &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/axis"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;axis&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; at=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/labels"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;labels&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; lwd=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; lwd.ticks=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; cex.axis=&lt;span style="color: #cc66cc;"&gt;0.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; mgp=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/axis"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;axis&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; at=&lt;a href="http://inside-r.org/r-doc/base/seq"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;seq&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;11000000&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/by"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;by&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1000000&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/labels"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;labels&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/formatC"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;formatC&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/seq"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;seq&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;11000000&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/by"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;by&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1000000&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/format"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;format&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"d"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; big.mark=&lt;span style="color: #0000ff;"&gt;','&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; las=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; cex.axis=&lt;span style="color: #cc66cc;"&gt;0.65&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; bty=&lt;span style="color: #0000ff;"&gt;"n"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; lwd=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; lwd.ticks=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; tck=&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.02&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; mgp=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.35&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; hadj=&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/mtext"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;mtext&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/graphics/text"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;text&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #0000ff;"&gt;"Price vs. Year"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; side = &lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; adj=&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/stats/line"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;line&lt;/span&gt;&lt;/a&gt;=&lt;span style="color: #cc66cc;"&gt;1.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; cex=&lt;span style="color: #cc66cc;"&gt;1.1&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# initialize the arrays&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# Creates a vector of 17 (there are 17 yeras) NAs that we will fill in later&lt;/span&gt;
means &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
mins &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
maxs &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
lowerq &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
upperq &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/rep"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;rep&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #000000; font-weight: bold;"&gt;NA&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;17&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# Creates a vectory of 1997, 1998, 1999,... 2013&lt;/span&gt;
&lt;span style="color: #666666; font-style: italic;"&gt;# These are the years at the bottom of the boxplot&lt;/span&gt;
years &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Perform this loop once for each value of i from 1997 to 2013&lt;/span&gt;
&lt;span style="color: #000000; font-weight: bold;"&gt;for&lt;/span&gt; &lt;span style="color: #009900;"&gt;(&lt;/span&gt;i &lt;span style="color: #000000; font-weight: bold;"&gt;in&lt;/span&gt; &lt;span style="color: #cc66cc;"&gt;1997&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2013&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
&lt;span style="color: #009900;"&gt;{&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# Run the boxplot statistics for this year&lt;/span&gt;
  boxstats &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/grDevices/boxplot.stats"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;boxplot.stats&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
    &lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/utils/data"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;"year"&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;&lt;span&gt;==&lt;/span&gt;i&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"price"&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;  &lt;span style="color: #666666; font-style: italic;"&gt;# filters teh data for only year that matches i&lt;/span&gt;
    &lt;a href="http://inside-r.org/r-doc/stats/coef"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;coef&lt;/span&gt;&lt;/a&gt; = &lt;span style="color: #cc66cc;"&gt;1.5&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; do.conf = &lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; do.out = &lt;span style="color: #000000; font-weight: bold;"&gt;TRUE&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# Next 5 lines store the boxplot statistics into our arrays&lt;/span&gt;
  &lt;span style="color: #666666; font-style: italic;"&gt;# i-1996 trasforms 1997 to 2013 into 1 to 17, these are the indexes in our array&lt;/span&gt;
  mins&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  lowerq&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  means&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;3&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  upperq&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;4&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
  maxs&lt;span style="color: #009900;"&gt;[&lt;/span&gt;i&lt;span&gt;-&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;1996&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; boxstats&lt;span&gt;$&lt;/span&gt;stats&lt;span style="color: #009900;"&gt;[&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;5&lt;/span&gt;&lt;span style="color: #009900;"&gt;]&lt;/span&gt;
&lt;span style="color: #009900;"&gt;}&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# combine the arrays into a dataframe to pass to textplot later&lt;/span&gt;
myBoxStats &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/data.frame"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data.frame&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;
  years &lt;span style="color: #666666; font-style: italic;"&gt;# first column, unformatted&lt;/span&gt;
  &lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/format"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;format&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/r-doc/base/data.frame"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;data.frame&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;mins&lt;span style="color: #339933;"&gt;,&lt;/span&gt;lowerq&lt;span style="color: #339933;"&gt;,&lt;/span&gt;means&lt;span style="color: #339933;"&gt;,&lt;/span&gt;upperq&lt;span style="color: #339933;"&gt;,&lt;/span&gt;maxs&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;scientific=&lt;span style="color: #000000; font-weight: bold;"&gt;FALSE&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;big.mark=&lt;span style="color: #0000ff;"&gt;","&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;small.mark=&lt;span style="color: #0000ff;"&gt;"."&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#format other columns nicely&lt;/span&gt;
  &lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# rename the column names so they come out nicely in textplot later&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/base/colnames"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;colnames&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;myBoxStats&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span&gt;&lt;-&lt;/span&gt; &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"Year"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"Minimum"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #0000ff;"&gt;"Lower Quartile"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;"Average"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;"Upper Quartile"&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt; &lt;span style="color: #0000ff;"&gt;"Maximum"&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# sets margins to nothing&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/graphics/par"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;par&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;a href="http://inside-r.org/packages/cran/mAr"&gt;&lt;span&gt;mar&lt;/span&gt;&lt;/a&gt;=&lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# Write out the table&lt;/span&gt;
&lt;a href="http://inside-r.org/packages/cran/PerformanceAnalytics"&gt;&lt;span&gt;PerformanceAnalytics&lt;/span&gt;&lt;/a&gt;&lt;span&gt;:::&lt;/span&gt;textplot&lt;span style="color: #009900;"&gt;(&lt;/span&gt;myBoxStats &lt;span style="color: #666666; font-style: italic;"&gt;#data&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;halign = &lt;span style="color: #0000ff;"&gt;"left"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#horizontal alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;valign = &lt;span style="color: #0000ff;"&gt;"top"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#vertical alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;row.valign=&lt;span style="color: #0000ff;"&gt;"center"&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#row alignment&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;a href="http://inside-r.org/packages/cran/mAr"&gt;&lt;span&gt;mar&lt;/span&gt;&lt;/a&gt; = &lt;a href="http://inside-r.org/r-doc/base/c"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;c&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.1&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;2&lt;/span&gt;&lt;span style="color: #339933;"&gt;,&lt;/span&gt;&lt;span style="color: #cc66cc;"&gt;0.1&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#margin parameters&lt;/span&gt;
                                &lt;span style="color: #339933;"&gt;,&lt;/span&gt;show.rownames=&lt;span style="color: #000000; font-weight: bold;"&gt;FALSE&lt;/span&gt; &lt;span style="color: #666666; font-style: italic;"&gt;#omit the record identifiers&lt;/span&gt;
&lt;span style="color: #009900;"&gt;)&lt;/span&gt;

&lt;span style="color: #666666; font-style: italic;"&gt;# write the output to disk&lt;/span&gt;
&lt;a href="http://inside-r.org/r-doc/grDevices/dev.off"&gt;&lt;span style="color: #003399; font-weight: bold;"&gt;dev.off&lt;/span&gt;&lt;/a&gt;&lt;span style="color: #009900;"&gt;(&lt;/span&gt;&lt;span style="color: #009900;"&gt;)&lt;/span&gt;
</code></pre>

<p><a href="http://www.inside-r.org/pretty-r">Created by Pretty R at inside-R.org</a></p>
</div>


  <footer>
    <p class="meta">
      
  



  <span class="byline author vcard">Authored by <span class="fn">
  
    admin
  
  </span></span>


      




<time class='entry-date' datetime='2013-07-28T13:11:41-04:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>1:11 pm</span></time>
      
      

<span class="categories">
  
    <a class='category' href='/blog/categories/how-to/'>how to</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://alekseynp.github.io/blog/2013/07/28/how-to-add-a-table-of-values-to-a-boxplot-in-r/" data-via="" data-counturl="http://alekseynp.github.io/blog/2013/07/28/how-to-add-a-table-of-values-to-a-boxplot-in-r/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/28/my-ontario-sunshine-list-work-in-the-financial-post/" title="Previous Post: My Ontario Sunshine List work in the Financial Post">&laquo; My Ontario Sunshine List work in the Financial Post</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/07/28/discovering-clusters-and-relationships-in-data-with-network-visualisations-language-network/" title="Next Post: Discovering clusters and relationships in data with network visualisations - Language Network">Discovering clusters and relationships in data with network visualisations - Language Network &raquo;</a>
      
    </p>
  </footer>
</article>


</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Aleksey Nozdryn-Plotnicki -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
